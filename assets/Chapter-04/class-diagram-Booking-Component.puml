@startuml BookingComponentClassDiagram
' Estilo
skinparam classAttributeIconSize 0
skinparam roundcorner 10

package "Componente de Gestión de Reservas" {

    class BookingService {
        - bookingRepository: IBookingRepository
        - propertyService: IPropertyServiceAdapter
        - billingService: IBillingServiceAdapter
        - notificationService: INotificationServiceAdapter
        + createBooking(guestId: string, propertyId: string, dates: DateRange): Booking
        + cancelBooking(bookingId: string): boolean
        + addReview(bookingId: string, reviewDetails: ReviewDetails): Review
    }

    interface IBookingRepository {
        + findById(id: string): Booking
        + findByGuest(guestId: string): Booking[]
        + save(booking: Booking): Booking
    }

    ' --- Entidades de Dominio ---
    class Booking {
        - id: string
        - guestId: string
        - propertyId: string
        - checkInDate: Date
        - checkOutDate: Date
        - status: BookingStatus
    }
    class Review {
        - id: string
        - bookingId: string
        - rating: int
        - comment: string
    }
    enum BookingStatus {
    PENDING
    CONFIRMED
    CANCELLED
    COMPLETED
    }

    ' --- Adaptadores para comunicarse con otros componentes ---
    interface IPropertyServiceAdapter
    {
    + checkAvailability(...): boolean
    }

    interface IBillingServiceAdapter
    {
    + requestPayment(...): boolean
    }

    interface INotificationServiceAdapter {
    + sendBookingConfirmation(...): void
    }

    ' --- Relaciones ---
    BookingService "1" -> "1" IBookingRepository : uses
    BookingService "1" --> "1" IPropertyServiceAdapter
    BookingService "1" --> "1" IBillingServiceAdapter
    BookingService "1" --> "1" INotificationServiceAdapter
    Booking "1" -- "0..1" Review : has
    Booking -- BookingStatus
}
@enduml